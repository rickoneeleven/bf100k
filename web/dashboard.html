<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OES Dashboard</title>
    <link rel="stylesheet" href="dashboard.css">
    <meta http-equiv="refresh" content="60">
    <style>
        /* Inline styles for status colors */
        .status-inplay {
            color: #2ecc71;
            font-weight: bold;
        }

        .status-notinplay {
            color: #e74c3c;
            font-weight: bold;
        }

        /* Styles for log viewer changes */
        #log-content {
            max-height: none;
            overflow-y: visible;
            background-color: #f8f8f8;
            border-radius: 4px;
            padding: 15px;
            font-family: monospace;
            font-size: 0.9rem;
        }

        .log-controls {
            text-align: center;
            margin-top: 10px;
        }

        .log-controls a {
            display: inline-block;
            padding: 5px 10px;
            background-color: #3498db;
            color: white;
            text-decoration: none;
            border-radius: 4px;
            margin: 0 5px;
        }

        .log-controls a:hover {
            background-color: #2980b9;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>OES Dashboard</h1>
            <p class="timestamp">Last Updated: <span id="last-updated">Loading...</span></p>
        </header>

        <div class="grid-container">
            <div class="card status">
                <h2>System Status</h2>
                <div class="status-content">
                    <div class="status-item">
                        <span class="label">Mode:</span>
                        <span class="value" id="mode">Loading...</span>
                    </div>
                    <div class="status-item">
                        <span class="label">Target Amount:</span>
                        <span class="value" id="target">Loading...</span>
                    </div>
                    <div class="status-item">
                        <span class="label">Current Cycle:</span>
                        <span class="value" id="cycle">Loading...</span>
                    </div>
                    <div class="status-item">
                        <span class="label">Current Bet in Cycle:</span>
                        <span class="value" id="bet-in-cycle">Loading...</span>
                    </div>
                    <div class="status-item">
                        <span class="label">Next Stake:</span>
                        <span class="value" id="next-stake">Loading...</span>
                    </div>
                    <div class="status-item">
                        <span class="label">Total Initial Stakes Lost:</span>
                        <span class="value" id="profit-loss">Loading...</span>
                    </div>
                </div>
            </div>

            <div class="card statistics">
                <h2>Statistics</h2>
                <div class="stats-content">
                    <div class="stats-item">
                        <span class="label">Total Bets Placed:</span>
                        <span class="value" id="total-bets">Loading...</span>
                    </div>
                    <div class="stats-item">
                        <span class="label">Win Rate:</span>
                        <span class="value" id="win-rate">Loading...</span>
                    </div>
                    <div class="stats-item">
                        <span class="label">Wins / Losses:</span>
                        <span class="value" id="win-loss">Loading...</span>
                    </div>
                    <div class="stats-item">
                        <span class="label">Total Commission Paid:</span>
                        <span class="value" id="commission-paid">Loading...</span>
                    </div>
                    <div class="stats-item">
                        <span class="label">Highest Balance:</span>
                        <span class="value" id="highest-balance">Loading...</span>
                    </div>
                </div>
            </div>

            <div class="card active-bet">
                <h2>Active Bet</h2>
                <div id="active-bet-content">
                    <p id="no-active-bet" style="display: none;">No active bet</p>
                    <div id="active-bet-details" style="display: none;">
                        <div class="status-content">
                            <!-- Left column - basic bet details -->
                            <div class="status-item">
                                <span class="label">Event:</span>
                                <span class="value" id="event-name">Loading...</span>
                            </div>
                            <div class="status-item">
                                <span class="label">Kick Off Time:</span>
                                <span class="value" id="kick-off-time">Loading...</span>
                            </div>
                            <div class="status-item">
                                <span class="label">Selection:</span>
                                <span class="value" id="selection">Loading...</span>
                            </div>
                            <div class="status-item">
                                <span class="label">In Play Status:</span>
                                <span class="value" id="in-play-status">Loading...</span>
                            </div>
                            <div class="status-item">
                                <span class="label">Odds:</span>
                                <span class="value" id="odds">Loading...</span>
                            </div>
                            <div class="status-item">
                                <span class="label" id="team1-odds-label">Team 1 Win Odds:</span>
                                <span class="value" id="team1-odds">Loading...</span>
                            </div>
                            <div class="status-item">
                                <span class="label">Stake:</span>
                                <span class="value" id="stake">Loading...</span>
                            </div>
                            <div class="status-item">
                                <span class="label" id="team2-odds-label">Team 2 Win Odds:</span>
                                <span class="value" id="team2-odds">Loading...</span>
                            </div>
                            <div class="status-item">
                                <span class="label">Placed:</span>
                                <span class="value" id="placed-time">Loading...</span>
                            </div>
                            <div class="status-item">
                                <span class="label">Draw Odds:</span>
                                <span class="value" id="draw-odds">Loading...</span>
                            </div>
                            <div class="status-item">
                                <span class="label">Market ID:</span>
                                <span class="value" id="market-id">Loading...</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Log viewer moved above bet history -->
        <div class="card log-viewer">
            <h2>Latest Log Entries</h2>
            <div id="log-container">
                <div id="log-content">
                    <pre id="log-entries">Loading logs...</pre>
                </div>
                <div class="log-controls">
                    <a href="#" id="show-all-logs" style="display: none;">Show All</a>
                    <a href="#" id="show-less-logs" style="display: none;">Show Less</a>
                </div>
            </div>
        </div>

        <!-- Bet history now after log viewer -->
        <div class="card bet-history">
            <h2>Bet History</h2>
            <div id="bet-history-content">
                <table id="history-table">
                    <thead>
                        <tr>
                            <th>Time</th>
                            <th>Event</th>
                            <th>Selection</th>
                            <th>Stake</th>
                            <th>Result</th>
                            <th>Profit/Loss</th>
                            <th>Cumulative Loss</th> <!-- New Column Header -->
                        </tr>
                    </thead>
                    <tbody id="history-body">
                        <tr>
                            <td colspan="7">Loading bet history...</td> <!-- Updated colspan -->
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script src="dashboard.js"></script>
</body>
</html>